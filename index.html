<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>V√¥lei Pro 1.7</title>
<style>
:root {
  --accent:#f1c40f; --ultra:#00fbff; --bg:#1a1a1a;
  --common:#bdc3c7; --rare:#3498db; --epic:#9b59b6; --mythic:#e74c3c;
}
body{margin:0;background:#000;font-family:Segoe UI;color:white;overflow:hidden}
.screen{display:none;position:absolute;inset:0;align-items:center;justify-content:center;background:var(--bg);z-index:10}
.active{display:flex}
.btn-main{background:var(--accent);color:black;border:none;padding:10px;margin:6px;border-radius:10px;font-weight:bold;cursor:pointer;width:220px}
canvas{background:#222;display:block}
#hud{position:absolute;inset:0;pointer-events:none;display:none}
.controls{position:absolute;bottom:20px;width:100%;display:flex;justify-content:space-between;padding:0 30px;pointer-events:auto}
.btn-act{width:70px;height:70px;border-radius:50%;border:2px solid white;display:flex;align-items:center;justify-content:center;font-weight:bold;background:rgba(0,0,0,.6)}
</style>
</head>
<body>

<div id="screen-lobby" class="screen active">
  <div style="text-align:center;background:#2c3e50;padding:25px;border-radius:20px;border:3px solid var(--accent)">
    <h2 style="color:var(--accent)">V√îLEI PRO üèê</h2>
    <button class="btn-main" onclick="startGame()">JOGAR</button>
    <button class="btn-main" onclick="openCatalog()">CAT√ÅLOGO</button>
    <p>Moedas: <span id="money">0</span></p>
  </div>
</div>

<div id="screen-catalog" class="screen">
  <div style="background:#2c3e50;padding:20px;border-radius:15px;border:3px solid var(--accent);width:300px">
    <h3>SKINS & ESTILOS</h3>
    <div id="catalog"></div>
    <button class="btn-main" onclick="backLobby()">VOLTAR</button>
  </div>
</div>

<canvas id="game" width="800" height="400"></canvas>

<div id="hud">
  <div class="controls">
    <div style="display:flex;gap:10px">
      <div class="btn-act" id="left">‚Üê</div>
      <div class="btn-act" id="right">‚Üí</div>
      <div class="btn-act" id="dive">DIVE</div>
    </div>
    <div style="display:flex;gap:10px">
      <div class="btn-act" id="jump">PULO</div>
      <div class="btn-act" id="skill">SKILL</div>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

// ================= ITENS =================
const ITEMS = [
  // skins
  {id:"skin_default", name:"Normal", type:"skin", color:"red"},
  {id:"skin_ninja", name:"Ninja", type:"skin", color:"#111"},
  {id:"skin_asahi", name:"Asahi", type:"skin", color:"orange"},
  {id:"skin_noya", name:"Nishinoya", type:"skin", color:"yellow"},
  {id:"skin_setter", name:"Setter", type:"skin", color:"#2e86de"},

  // estilos
  {id:"style_none", name:"Normal", type:"style"},
  {id:"style_asahi", name:"Asahi Spike", type:"style"},
  {id:"style_noya", name:"Nishinoya Dive", type:"style"},
  {id:"style_setter", name:"Setter Levantador", type:"style"},
];

// ================= GAME =================
let game = {
  money: 300,
  skin:"skin_default",
  style:"style_none",
  active:false,
  energy:0
};

let p1={x:100,y:340,vy:0,dash:0};
let bot={x:650,y:340,vy:0};
let ball={x:400,y:100,vx:2,vy:0};

let input={left:false,right:false};

// ================= UI =================
function updateUI(){
  document.getElementById("money").innerText = game.money;
}

function startGame(){
  document.getElementById("screen-lobby").classList.remove("active");
  document.getElementById("hud").style.display="block";
  game.active=true;
}

function openCatalog(){
  document.getElementById("screen-lobby").classList.remove("active");
  document.getElementById("screen-catalog").classList.add("active");
  renderCatalog();
}

function backLobby(){
  document.getElementById("screen-catalog").classList.remove("active");
  document.getElementById("screen-lobby").classList.add("active");
}

function renderCatalog(){
  const div=document.getElementById("catalog");
  div.innerHTML="";
  ITEMS.forEach(it=>{
    const btn=document.createElement("button");
    btn.className="btn-main";
    btn.innerText=it.name;
    btn.onclick=()=>{
      if(it.type==="skin") game.skin=it.id;
      if(it.type==="style") game.style=it.id;
    };
    div.appendChild(btn);
  });
}

// ================= CONTROLES =================
function bind(id,key){
  const e=document.getElementById(id);
  e.onmousedown=e.ontouchstart=()=>input[key]=true;
  e.onmouseup=e.ontouchend=()=>input[key]=false;
}
bind("left","left");
bind("right","right");

document.getElementById("jump").onclick=()=>{
  if(p1.y>=340) p1.vy=-9;
};

document.getElementById("dive").onclick=()=>{
  p1.dash=20;
  if(game.style==="style_noya") p1.dash=40;
};

document.getElementById("skill").onclick=()=>{
  if(game.energy>=100){
    game.energy=0;
    if(game.style==="style_asahi") ball.vy=-14;
    if(game.style==="style_setter"){
      ball.vy=-12;
      ball.vx*=0.3;
    }
  }
};

// ================= LOOP =================
function drawPlayer(p,isBot=false){
  let skin=ITEMS.find(i=>i.id==(isBot?"skin_default":game.skin));
  ctx.fillStyle=skin.color;
  ctx.fillRect(p.x,p.y-50,40,50);
  ctx.beginPath();
  ctx.arc(p.x+20,p.y-60,12,0,Math.PI*2);
  ctx.fill();
}

function loop(){
  if(game.active){

    // player
    let speed=4;
    if(p1.dash>0){speed=10;p1.dash--;}
    if(input.left) p1.x-=speed;
    if(input.right) p1.x+=speed;
    p1.vy+=0.4;
    p1.y+=p1.vy;
    if(p1.y>340){p1.y=340;p1.vy=0;}

    // ball
    ball.vy+=0.3;
    ball.x+=ball.vx;
    ball.y+=ball.vy;

    if(ball.x<0||ball.x>800) ball.vx*=-1;
    if(ball.y>380){ball.x=400;ball.y=100;ball.vx=2;ball.vy=0;}

    // collision player
    if(ball.x>p1.x && ball.x<p1.x+40 && ball.y>p1.y-60){
      let power=-8;
      let speedBall=0.5;

      if(game.style==="style_asahi"){power=-13;speedBall=1;}
      if(game.style==="style_setter"){power=-10;speedBall=0.2;}

      ball.vy=power;
      ball.vx=(ball.x-(p1.x+20))*speedBall;
      game.energy=Math.min(100,game.energy+15);
    }

    // bot AI
    bot.x += (ball.x>bot.x?2:-2);
  }

  // draw
  ctx.clearRect(0,0,800,400);
  ctx.fillStyle="#d4a373";
  ctx.fillRect(0,360,800,40);
  ctx.fillStyle="white";
  ctx.fillRect(398,280,4,80);

  drawPlayer(p1,false);
  drawPlayer(bot,true);

  ctx.fillStyle="white";
  ctx.beginPath();
  ctx.arc(ball.x,ball.y,10,0,Math.PI*2);
  ctx.fill();

  requestAnimationFrame(loop);
}

updateUI();
loop();
</script>
</body>
    </html>
