<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>V√¥lei Pro Anime</title>
<style>
body{margin:0;background:#000;color:white;font-family:sans-serif;overflow:hidden}
canvas{display:block;background:#111}

/* HUD */
#hud{
  position:absolute;top:10px;width:100%;
  display:flex;justify-content:center;gap:40px;
  font-size:20px;font-weight:bold;text-shadow:2px 2px black;
  pointer-events:none;
}
#energyBox{
  position:absolute;bottom:110px;left:50%;
  transform:translateX(-50%);
  width:220px;height:12px;border:2px solid white;
}
#energy{height:100%;width:0%;background:#00fbff;box-shadow:0 0 10px #00fbff}

/* CONTROLES */
.controls{
  position:absolute;bottom:10px;width:100%;
  display:flex;justify-content:space-between;padding:0 20px;
  pointer-events:auto;
}
.btn{
  width:70px;height:70px;border-radius:50%;
  border:2px solid white;background:rgba(0,0,0,.6);
  display:flex;align-items:center;justify-content:center;
  font-weight:bold;font-size:14px;
}
.btn.big{width:100px;border-radius:12px;background:#f1c40f;color:black}
</style>
</head>
<body>

<canvas id="game"></canvas>

<div id="hud">
  <div>VOC√ä: <span id="p1Score">0</span></div>
  <div>BOT: <span id="botScore">0</span></div>
</div>

<div id="energyBox"><div id="energy"></div></div>

<div class="controls">
  <div style="display:flex;gap:10px">
    <div class="btn" id="left">‚Üê</div>
    <div class="btn" id="right">‚Üí</div>
  </div>
  <div style="display:flex;gap:10px">
    <div class="btn big" id="jump">PULO</div>
    <div class="btn big" id="smash">SMASH</div>
  </div>
</div>

<script>
// ===== CANVAS =====
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

// ===== GAME STATE =====
let game = {
  scoreP1:0,
  scoreBot:0,
  energy:0,
  lastWinner:"p1"
};

// ===== OBJETOS =====
let ball = {x:200,y:100,vx:4,vy:0,r:10};
let p1 = {x:100,y:0,vy:0,w:40,h:60,smash:false};
let bot = {x:0,y:0,vy:0,w:40,h:60};

// ===== INPUT =====
let input={left:false,right:false};

function bind(id,key){
  const e=document.getElementById(id);
  e.onmousedown=()=>input[key]=true;
  e.onmouseup=()=>input[key]=false;
  e.ontouchstart=()=>input[key]=true;
  e.ontouchend=()=>input[key]=false;
}
bind("left","left");
bind("right","right");

document.getElementById("jump").onclick=()=>{
  if(p1.y>=ground()) p1.vy=-13;
};

document.getElementById("smash").onclick=()=>{
  if(game.energy>=100){
    game.energy=0;
    p1.smash=true;
  }
};

// ===== CH√ÉO =====
function ground(){return canvas.height-60}

// ===== SPAWN =====
function spawnBall(){
  ball.x = game.lastWinner==="p1"?p1.x+20:bot.x+20;
  ball.y = 100;
  ball.vx = (Math.random()>0.5?5:-5);
  ball.vy = 0;
}
spawnBall();

// ===== LOOP =====
function update(){

  // PLAYER
  if(input.left) p1.x-=5;
  if(input.right) p1.x+=5;

  p1.vy+=0.5;
  p1.y+=p1.vy;
  if(p1.y>ground()){p1.y=ground();p1.vy=0}

  p1.x=Math.max(0,Math.min(canvas.width/2-50,p1.x));

  // BOT IA (mais inteligente)
  let target = ball.x;
  let speed = 3 + game.scoreP1*0.1; // dificuldade aumenta
  if(target>bot.x+10) bot.x+=speed;
  else if(target<bot.x-10) bot.x-=speed;

  bot.x=Math.max(canvas.width/2+10,Math.min(canvas.width-50,bot.x));
  bot.y=ground();

  // BOLA
  ball.vy+=0.4;
  ball.x+=ball.vx;
  ball.y+=ball.vy;

  if(ball.x<ball.r||ball.x>canvas.width-ball.r) ball.vx*=-1;

  // COLIS√ÉO
  function hit(p,isPlayer=false){
    if(ball.x>p.x && ball.x<p.x+p.w && ball.y>p.y-p.h && ball.y<p.y){
      ball.vy = isPlayer && p1.smash ? -16 : -10;
      ball.vx = (ball.x-(p.x+p.w/2))*0.2;
      if(isPlayer){
        game.energy=Math.min(100,game.energy+15);
        p1.smash=false;
      }
    }
  }
  hit(p1,true);
  hit(bot,false);

  // PONTO
  if(ball.y>canvas.height){
    if(ball.x<canvas.width/2){
      game.scoreBot++; game.lastWinner="bot";
    } else {
      game.scoreP1++; game.lastWinner="p1";
    }
    document.getElementById("p1Score").innerText=game.scoreP1;
    document.getElementById("botScore").innerText=game.scoreBot;

    if(game.scoreP1>=10 || game.scoreBot>=10){
      alert(game.scoreP1>game.scoreBot?"üèÜ VOC√ä VENCEU!":"üíÄ BOT VENCEU!");
      location.reload();
    }
    spawnBall();
  }

  document.getElementById("energy").style.width=game.energy+"%";
}

// ===== DRAW =====
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // fundo
  ctx.fillStyle="#1e272e";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // ch√£o
  ctx.fillStyle="#d4a373";
  ctx.fillRect(0,ground(),canvas.width,60);

  // rede
  ctx.fillStyle="white";
  ctx.fillRect(canvas.width/2-2,ground()-100,4,100);

  // player
  ctx.fillStyle="red";
  ctx.fillRect(p1.x,p1.y-p1.h,p1.w,p1.h);

  // bot
  ctx.fillStyle="blue";
  ctx.fillRect(bot.x,bot.y-bot.h,bot.w,bot.h);

  // bola
  ctx.fillStyle="white";
  ctx.beginPath();
  ctx.arc(ball.x,ball.y,ball.r,0,Math.PI*2);
  ctx.fill();

  // efeito smash
  if(p1.smash){
    ctx.strokeStyle="#00fbff";
    ctx.lineWidth=4;
    ctx.beginPath();
    ctx.arc(ball.x,ball.y,25,0,Math.PI*2);
    ctx.stroke();
  }
}

function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
