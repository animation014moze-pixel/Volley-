<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>V√¥lei Pro V1.7</title>

<style>
:root { 
    --accent: #f1c40f; --ultra: #00fbff; --bg: #1a1a1a;
    --common: #bdc3c7; --rare: #3498db; --epic: #9b59b6; --mythic: #e74c3c;
}
body { margin: 0; background: #000; font-family: Arial; color: white; overflow: hidden; }

canvas {
  position: absolute;
  inset: 0;
  z-index: 1;
}

.screen {
  position: absolute;
  inset: 0;
  display: none;
  justify-content: center;
  align-items: center;
  background: rgba(0,0,0,0.8);
  z-index: 5;
}

.active { display: flex; }

.btn-main {
  background: var(--accent);
  border: none;
  padding: 10px;
  margin: 6px;
  border-radius: 8px;
  font-weight: bold;
  width: 100%;
  cursor: pointer;
}

#hud {
  position: absolute;
  inset: 0;
  z-index: 4;
  pointer-events: none;
  display: none;
}

.controls {
  position: absolute;
  bottom: 20px;
  width: 100%;
  display: flex;
  justify-content: space-between;
  padding: 0 30px;
  pointer-events: auto;
}

.btn-act {
  width: 70px;
  height: 70px;
  background: rgba(0,0,0,0.6);
  border: 2px solid white;
  border-radius: 50%;
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  cursor: pointer;
}
</style>
</head>
<body>

<!-- LOBBY -->
<div id="screen-lobby" class="screen active">
  <div style="background:#2c3e50;padding:20px;border-radius:15px;width:300px;text-align:center;">
    <h2>V√îLEI 1.7</h2>
    <button class="btn-main" onclick="startMode('friendly')">JOGAR</button>
    <button class="btn-main" onclick="openCatalog()">CAT√ÅLOGO</button>
    <button class="btn-main" onclick="pullGacha()">GACHA</button>
    <p>Moedas: <span id="money-display">0</span></p>
  </div>
</div>

<!-- CANVAS -->
<canvas id="gameCanvas"></canvas>

<!-- HUD -->
<div id="hud">
  <div class="controls">
    <div>
      <div class="btn-act" id="m-left">‚Üê</div>
      <div class="btn-act" id="m-right">‚Üí</div>
    </div>
    <div>
      <div class="btn-act" id="m-jump">PULO</div>
      <div class="btn-act" id="p-use">PODER</div>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = 800;
canvas.height = 400;

// ===== ITENS =====
const ITEMS = [
  {id:"style_none", type:"skill", name:"Normal"},
  {id:"style_asahi", type:"skill", name:"Asahi"},
  {id:"style_noya", type:"skill", name:"Nishinoya"},
  {id:"style_setter", type:"skill", name:"Setter"},
];

// ===== GAME =====
let game = {
  money: 500,
  eq: { skill:"style_none" },
  active:false,
  energy:0
};

let ball = {x:400,y:200,vx:0,vy:0};
let p1 = {x:100,y:360,vy:0};
let bot = {x:650,y:360,vy:0};
let inputs = {left:false,right:false};

// ===== UI =====
function setScreen(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  if(id!=="none") document.getElementById(id).classList.add("active");
}

function startMode(){
  setScreen("none");
  document.getElementById("hud").style.display="block";
  game.active=true;
  spawnBall();
}

function spawnBall(){
  ball.x=400;
  ball.y=100;
  ball.vx=0;
  ball.vy=0;
}

// ===== CONTROLES =====
function bind(id,key){
  const el=document.getElementById(id);
  el.onmousedown=el.ontouchstart=e=>{e.preventDefault();inputs[key]=true;}
  el.onmouseup=el.ontouchend=e=>{inputs[key]=false;}
}
bind("m-left","left");
bind("m-right","right");

document.getElementById("m-jump").onclick=()=>{
  if(p1.y>=360) p1.vy=-9;
};

document.getElementById("p-use").onclick=()=>{
  if(game.energy>=100){
    game.energy=0;
    if(game.eq.skill==="style_asahi") ball.vy=-16;
    if(game.eq.skill==="style_setter"){ ball.vy=-12; ball.vx*=0.2; }
  }
};

// ===== LOOP =====
function loop(){
  if(game.active){

    // player
    if(inputs.left) p1.x-=5;
    if(inputs.right) p1.x+=5;
    p1.vy+=0.3;
    p1.y+=p1.vy;
    if(p1.y>=360){p1.y=360;p1.vy=0;}

    // bola
    ball.vy+=0.2;
    ball.x+=ball.vx;
    ball.y+=ball.vy;

    // colis√£o
    if(ball.x>p1.x && ball.x<p1.x+40 && ball.y>p1.y-50){
      let power=-7;
      let speed=0.4;

      if(game.eq.skill==="style_asahi"){ power=-13; speed=1; }
      if(game.eq.skill==="style_noya"){ power=-9; speed=0.6; }
      if(game.eq.skill==="style_setter"){ power=-10; ball.vx*=0.3; }

      ball.vy=power;
      ball.vx=(ball.x-(p1.x+20))*speed;
      game.energy=Math.min(100,game.energy+15);
    }
  }

  // draw
  ctx.fillStyle="#1a1a1a";
  ctx.fillRect(0,0,800,400);

  ctx.fillStyle="white";
  ctx.beginPath();
  ctx.arc(ball.x,ball.y,10,0,Math.PI*2);
  ctx.fill();

  ctx.fillStyle="red";
  ctx.fillRect(p1.x,p1.y-50,40,50);

  requestAnimationFrame(loop);
}
loop();

// ===== CAT√ÅLOGO / GACHA (simplificado) =====
function openCatalog(){
  alert("Cat√°logo ainda √© o seu, depois eu encaixo no seu c√≥digo original üòà");
}

function pullGacha(){
  const styles=["style_none","style_asahi","style_noya","style_setter"];
  game.eq.skill = styles[Math.floor(Math.random()*styles.length)];
  alert("Novo estilo equipado: "+game.eq.skill);
}
</script>
</body>
</html>
